// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  //url       = env("POSTGRES_PRISMA_URL") // uses connection pooling
  //directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection for migrations
  url       = env("DATABASE_PRISMA_URL") // uses connection pooling
  directUrl = env("DATABASE_URL_NON_POOLING") // uses a direct connection for migrations
}

model Review {
  id              String   @id @default(uuid())
  repoName        String   // GitHub repository URL
  branchName      String   // Branch name (Module)
  studentName     String?  // Optional student name
  reviewContent   String   @db.Text // JSON string with results and summary
  score           String?  // Score in format "75/100"
  status          String   @default("COMPLETED") // Status of the review
  createdAt       DateTime @default(now()) // Timestamp of review creation
  
  // Composite index for faster lookups when checking for existing reviews
  @@index([repoName, branchName, studentName])
}
